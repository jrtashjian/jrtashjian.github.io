<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <title>Google Maps API: Custom Zoom Slider | JR Tashjian</title>
        <meta name="description" content="Senior Software Engineer">

        <meta property="og:title" content="Google Maps API: Custom Zoom Slider | JR Tashjian"/>
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://jrtashjian.com/2009/11/google-maps-api-custom-zoom-slider"/>
        <meta property="og:description" content="Senior Software Engineer" />
        <meta property="og:image" content="https://jrtashjian.com/assets/images/about-page.webp" />

        <!-- Twitter Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta property="twitter:domain" content="jrtashjian.com">
        <meta property="twitter:url" content="https://jrtashjian.com">
        <meta name="twitter:title" content="Google Maps API: Custom Zoom Slider | JR Tashjian">
        <meta name="twitter:description" content="Senior Software Engineer">
        <meta name="twitter:image" content="https://jrtashjian.com/assets/images/about-page.webp">


        <link rel="canonical" href="https://jrtashjian.com/2009/11/google-maps-api-custom-zoom-slider">
        <link rel="icon" href="/assets/images/favicon-32x32.jpg" sizes="32x32" />
        <link rel="icon" href="/assets/images/favicon-192x192.jpg" sizes="192x192" />
        <link rel="apple-touch-icon" href="/assets/images/favicon-180x180.jpg" />
        <meta name="msapplication-TileImage" content="/assets/images/favicon-270x270.jpg" />

                <script defer data-domain="jrtashjian.com" src="https://plausible.jrtashjian.com/js/plausible.js"></script>
        
        <link rel="stylesheet" href="/assets/build/css/main.css?id=4e5d00fa5633ea52d10317e19903d42b">
        <script defer src="/assets/build/js/main.js?id=70f6d1d6eeef91fcbf04b0be8a530710"></script>

        <link rel="alternate" type="application/rss+xml" title="All Posts by JR Tashjian (The RSS Feed)" href="https://jrtashjian.com/feed.xml" />
    </head>
    <body class="bg-white dark:bg-black text-black dark:text-white font-mono leading-relaxed px-4">
        <div class="mx-auto max-w-prose">

            <header class="flex flex-wrap mb-8 py-8 border-b-8 border-black dark:border-white" role="banner">
                <a href="/" title="JR Tashjian home" class="my-2">
                    <h1 class="font-bold">~/jrtashjian</h1>
                </a>
                <div class="h-card flex ml-auto mr-0">
                    <a href="https://talos.link/@jrtashjian" rel="me" class="u-url inline-flex ml-3 my-2">
                        <svg class="mr-2 fill-current" width="24" height="24" view-box="0 0 24 24" version="1.1">
                            <path d="M23.193 7.879c0-5.206-3.411-6.732-3.411-6.732C18.062.357 15.108.025 12.041 0h-.076c-3.068.025-6.02.357-7.74 1.147 0 0-3.411 1.526-3.411 6.732 0 1.192-.023 2.618.015 4.129.124 5.092.934 10.109 5.641 11.355 2.17.574 4.034.695 5.535.612 2.722-.15 4.25-.972 4.25-.972l-.09-1.975s-1.945.613-4.129.539c-2.165-.074-4.449-.233-4.799-2.891a5.499 5.499 0 0 1-.048-.745s2.125.52 4.817.643c1.646.075 3.19-.097 4.758-.283 3.007-.359 5.625-2.212 5.954-3.905.517-2.665.475-6.507.475-6.507zm-4.024 6.709h-2.497V8.469c0-1.29-.543-1.944-1.628-1.944-1.2 0-1.802.776-1.802 2.312v3.349h-2.483v-3.35c0-1.536-.602-2.312-1.802-2.312-1.085 0-1.628.655-1.628 1.944v6.119H4.832V8.284c0-1.289.328-2.313.987-3.07.68-.758 1.569-1.146 2.674-1.146 1.278 0 2.246.491 2.886 1.474L12 6.585l.622-1.043c.64-.983 1.608-1.474 2.886-1.474 1.104 0 1.994.388 2.674 1.146.658.757.986 1.781.986 3.07v6.304z" />
                        </svg>
                        Mastodon
                    </a>
                    <a href="mailto:hello@jrtashjian.com" class="u-email inline-flex ml-3 my-2">
                        <svg class="mr-2 fill-current" width="24" height="24" view-box="0 0 24 24" version="1.1">
                            <path d="M20,4H4C2.895,4,2,4.895,2,6v12c0,1.105,0.895,2,2,2h16c1.105,0,2-0.895,2-2V6C22,4.895,21.105,4,20,4z M20,8.236l-8,4.882 L4,8.236V6h16V8.236z" />
                        </svg>
                        Email
                    </a>
                </div>
            </header>

            <main role="main">
                	<article class="h-entry">
		<header>
			<h1 class="p-name">Google Maps API: Custom Zoom Slider</h1>
			<time class="dt-published mr-3" datetime="2009-11-15T19:00:00-05:00" title="Published on November 16, 2009">November 16, 2009</time>
			<a class="p-author h-card sr-only" href="http://jrtashjian.com">JR Tashjian</a>
		</header>

		
		<div class="e-content">
			<p><a href="http://code.google.com/apis/maps/">Google Maps API</a> is just one of the API's I've been working with recently. The most recent problem I've run into that needed to be solved was the ability to create a custom designed zoom slider, replacing the default. The default one was not gonna work for this project and the designer created a better looking one.</p>

<p>While searching online to see if this had already been achieved. I failed to find any example of what I needed to accomplish easily and still be able to reuse the code. So, I decided to take on the feat. But, where to start?</p>

<h2>jQuery</h2>

<p>I am a huge fan of <a href="http://jquery.com">jQuery</a> and jQuery has a user interface library, <a href="http://jqueryui.com">jQuery UI</a>. jQuery UI gives us the ability to create a slider widget, which is highly customizable and would work for what I needed to do.</p>

<p>So, go download <a href="http://jquery.com">jQuery</a> and download <a href="http://jqueryui.com/download">jQuery UI</a> and we'll get started! You will also need to get a <a href="http://code.google.com/apis/maps/signup.html">Google Maps API key</a>.</p>

<h2>Setup</h2>

<p>To begin, we will have to create an HTML file which loads all of our stylesheets, javascript and google map. Below is the initial HTML code. I have added the HTML for our custom slider already.</p>

<pre><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us"&gt;
&lt;head profile="http://gmpg.org/xfn/11"&gt;

    &lt;meta http-equiv="content-type" content="text/html; charset=utf-8" /&gt;
    &lt;title&gt;Google Maps API: Custom Zoom Slider&lt;/title&gt;

    &lt;!-- JQUERY --&gt;
    &lt;script type="text/javascript" charset="utf-8" src="javascript/jquery.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" charset="utf-8" src="javascript/jquery.ui.js"&gt;&lt;/script&gt;

    &lt;!-- GOOGLE MAPS API --&gt;
    &lt;script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=YOUR_API_KEY" type="text/javascript"&gt;&lt;/script&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;!-- our custom slider container --&gt;
&lt;div id="zoom-slider"&gt;

    &lt;!-- decrease zoom level control --&gt;
    &lt;a id="zoom-control-minus" href="#"&gt;&lt;/a&gt;

    &lt;!-- zoom slider control --&gt;
    &lt;div id="zoom-range"&gt;
        &lt;div id="zoom-path"&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- increase zoom level control --&gt;
    &lt;a id="zoom-control-plus" href="#"&gt;&lt;/a&gt;

&lt;/div&gt;

&lt;!-- this is where google maps will load --&gt;
&lt;div id="map"&gt;&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h2>Loading Google Maps API</h2>

<p>Next we will need to load the Google Maps API. Here is the code. It is commented pretty well and should be easy to understand.</p>

<pre><code>// store the current zoom level for reference with google maps and custom zoom slider
var currentZoomLevel = 10;

// map object (global)
var map;

$(document).ready(function() {
    // create the google map
    var map = new GMap2(document.getElementById("map"));

    // set starting center point
    map.setCenter(new GLatLng(37.4419, -122.1419), currentZoomLevel);

    // force normal maps type
    map.setMapType(G_NORMAL_MAP);

    // define minimum and maximum zoom levels
    G_NORMAL_MAP.getMinimumResolution = function() { return 0; }
    G_NORMAL_MAP.getMaximumResolution = function() { return 19; }

    // sets the map to "animate" zoom (only on double click and mouse wheel scroll)
    map.enableContinuousZoom();

    // enable the ability to zoom via mouse wheel
    map.enableScrollWheelZoom();
});
</code></pre>

<p>You can configure the return values of <code>G_NORMAL_MAP.getMinimumResolution</code> and <code>G_NORMAL_MAP.getMaximumResolution</code> to limit the zoom distance. 0 is the lowest value and 19 being the highest value (20 zoom levels).</p>

<h2>Lets Style It!</h2>

<p>Now that we have Google Maps loading into our div, we need to style it! Below is the code to style the Google Map and the custom slider. Again, I use a reset stylesheet which is bundled in the download.</p>

<pre><code>/* Globals
------------------------------------------------------*/
body { font:75% helvetica, arial, sans-serif; background:#fff; color:#333; text-align:center; }

/* Google Map
------------------------------------------------------*/
#map { margin-top:25px; height:300px; width:518px; border:1px solid #fff; }

/* Custom Slider
------------------------------------------------------*/
#zoom-slider { margin:0 auto; position:relative; height:28px; width:203px; background:url(../images/zoom-slider-background.jpg) no-repeat; }
/* minus button */
#zoom-slider #zoom-control-minus { position:absolute; top:9px; left:11px; display:block; height:10px; width:10px; background:url(../images/zoom-control-minus.jpg) no-repeat; overflow:hidden; text-indent:-9999em; }
/* plus button */
#zoom-slider #zoom-control-plus { position:absolute; top:9px; right:11px; display:block; height:10px; width:10px; background:url(../images/zoom-control-plus.jpg) no-repeat; overflow:hidden; text-indent:-9999em; }
/* container for the zoom 'handle' */
#zoom-slider #zoom-range { position:absolute; top:9px; left:31px; height:10px; width:140px; background:url(../images/zoom-slider-range.jpg) no-repeat; z-index:1; }
/* the zoom handle */
#zoom-slider #zoom-range .ui-slider-handle { position:absolute; top:0px; margin-left:-5px; height:10px; width:10px; background:url(../images/zoom-control-handle.png) no-repeat; border:0; cursor:pointer; z-index:2; outline:none; }
/* size path handle can travel*/
#zoom-slider #zoom-range #zoom-path { position:absolute; height:10px; width:130px; top:0px; left:5px; cursor:pointer; }
</code></pre>

<p>The zoom slider will now look like this (images bundled in the download):</p>

<p><img src="/assets/images/zoom-slider-image.jpg" alt="" title="zoom-slider-image" /></p>

<h2>Make It Work</h2>

<p>Now that we have everything looking nice and loading correctly, we need to make it work! Using jQuery UI and the Slider Widget, we will hook the <code>div#zoom-slider div#zoom-path</code> and allow jQuery UI to do it's magic. however, we still need to hook the plus and minus buttons and make the slider communicate with Google Maps to update our map. In the Javascript, after we are done setting up Google Maps, we will need to place this code.</p>

<pre><code>$(function() {
    // slider target
    var target = $('#zoom-slider #zoom-path');

    // create the slider
    target.slider({
        orientation: 'horizontal',
        value: currentZoomLevel,
        min: parseInt(G_NORMAL_MAP.getMinimumResolution()),
        max: parseInt(G_NORMAL_MAP.getMaximumResolution()),
        step: 1,
        animate: true,
        stop: function() {
            map.setZoom(parseInt(target.slider('option','value')));
        }
    });

    // update slider on zoom with double click
    GEvent.addListener(map, 'moveend', function() { target.slider('option','value', map.getZoom()); });

    // maximum slider value
    var maxValue = parseInt(target.slider('option', 'max'));

    // minimum slider value
    var minValue = parseInt(target.slider('option', 'min'));

    // hook increase zoom control
    $('#zoom-control-plus').click(function() {
        // current slider value
        var currentValue = parseInt(target.slider('option','value'));

        // current slider value increased by 1
        var newValue = currentValue+1;

        // is new value greater than max value?
        if(newValue = minValue) {
            // increase slider value
            target.slider('option', 'value', newValue);
            map.setZoom(newValue);
        } else {
            // slider is at max value
            target.slider('option', 'value', minValue);
            map.setZoom(minValue);
        }
        return false;
    });
});
</code></pre>

<p>Slider does a nice job of incrementing and decrementing the value and moving the handle the appropriate distance. Anytime the slider moves we need to update the map. Anytime the map moves we need to update the slider.</p>

<p>So, when initializing the slider, we hook the stop event of the slider. Each time the slider "stops" movement, we update the map zoom using the Google Map API function <a href="http://code.google.com/apis/maps/documentation/reference.html#GMap2.setZoom"><code>setZoom()</code></a>. So, now we know when we move the slider, the map will update as well!</p>

<p>Next, we hook the <code>moveend</code> event of Google Maps. If the user double clicks the map to zoom in and out or uses the scroll wheel to zoom in and out, we update the zoom value of the slider using <code>$.slider('option', 'value', map.getZoom())</code>. So, now we know when the map moves the slider will move as well.</p>

<p>Next, we need to hook the plus and minus buttons to allow a user to click them to zoom in and out. Using jQuery, we will bind each click event to update the map and slider values. The plus button will continue to zoom in until we reach the maximum zoom value. The minus button will continue to zoom out until we reach the minimum zoom value.</p>
		</div>
	</article>
            </main>

            <footer class="flex justify-end mt-8 py-8 border-t-8 border-black dark:border-white" role="contentinfo">
                Copyright (c) 2022 JR Tashjian
            </footer>
        </div>
    </body>
</html>
